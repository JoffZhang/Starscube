!function(e,t,n){"use strict";function r(){n.AdminLTE.layout={activate:function(){var t=this;t.fix(),t.fixSidebar(),n(e,".wrapper").resize(function(){t.fix(),t.fixSidebar()})},fix:function(){var t=n(".main-header").outerHeight()+n(".main-footer").outerHeight(),r=n(e).height(),a=n(".sidebar").height();if(n("body").hasClass("fixed"))n(".content-wrapper, .right-side").css("min-height",r-n(".main-footer").outerHeight());else{var i;r>=a?(n(".content-wrapper, .right-side").css("min-height",r-t),i=r-t):(n(".content-wrapper, .right-side").css("min-height",a),i=a);var o=n(n.AdminLTE.options.controlSidebarOptions.selector);"undefined"!=typeof o&&o.height()>i&&n(".content-wrapper, .right-side").css("min-height",o.height())}},fixSidebar:function(){return n("body").hasClass("fixed")?("undefined"==typeof n.fn.slimScroll&&e.console&&e.console.error("Error: the fixed layout requires the slimscroll plugin!"),void(n.AdminLTE.options.sidebarSlimScroll&&"undefined"!=typeof n.fn.slimScroll&&(n(".sidebar").slimScroll({destroy:!0}).height("auto"),n(".sidebar").slimscroll({height:n(e).height()-n(".main-header").height()+"px",color:"rgba(0,0,0,0.2)",size:"3px"})))):void("undefined"!=typeof n.fn.slimScroll&&n(".sidebar").slimScroll({destroy:!0}).height("auto"))}},n.AdminLTE.pushMenu={activate:function(t){var r=n.AdminLTE.options.screenSizes;n(document).on("click",t,function(t){t.preventDefault(),n(e).width()>r.sm-1?n("body").hasClass("sidebar-collapse")?n("body").removeClass("sidebar-collapse").trigger("expanded.pushMenu"):n("body").addClass("sidebar-collapse").trigger("collapsed.pushMenu"):n("body").hasClass("sidebar-open")?n("body").removeClass("sidebar-open").removeClass("sidebar-collapse").trigger("collapsed.pushMenu"):n("body").addClass("sidebar-open").trigger("expanded.pushMenu")}),n(".content-wrapper").click(function(){n(e).width()<=r.sm-1&&n("body").hasClass("sidebar-open")&&n("body").removeClass("sidebar-open")}),(n.AdminLTE.options.sidebarExpandOnHover||n("body").hasClass("fixed")&&n("body").hasClass("sidebar-mini"))&&this.expandOnHover()},expandOnHover:function(){var t=this,r=n.AdminLTE.options.screenSizes.sm-1;n(".main-sidebar").hover(function(){n("body").hasClass("sidebar-mini")&&n("body").hasClass("sidebar-collapse")&&n(e).width()>r&&t.expand()},function(){n("body").hasClass("sidebar-mini")&&n("body").hasClass("sidebar-expanded-on-hover")&&n(e).width()>r&&t.collapse()})},expand:function(){n("body").removeClass("sidebar-collapse").addClass("sidebar-expanded-on-hover")},collapse:function(){n("body").hasClass("sidebar-expanded-on-hover")&&n("body").removeClass("sidebar-expanded-on-hover").addClass("sidebar-collapse")}},n.AdminLTE.tree=function(e){var t=this,r=n.AdminLTE.options.animationSpeed;n(document).off("click",e+" li a").on("click",e+" li a",function(e){var a=n(this),i=a.next();if(i.is(".treeview-menu")&&i.is(":visible")&&!n("body").hasClass("sidebar-collapse"))i.slideUp(r,function(){i.removeClass("menu-open")}),i.parent("li").removeClass("active");else if(i.is(".treeview-menu")&&!i.is(":visible")){var o=a.parents("ul").first(),s=o.find("ul:visible").slideUp(r);s.removeClass("menu-open");var l=a.parent("li");i.slideDown(r,function(){i.addClass("menu-open"),o.find("li.active").removeClass("active"),l.addClass("active"),t.layout.fix()})}i.is(".treeview-menu")&&e.preventDefault()})},n.AdminLTE.controlSidebar={activate:function(){var e=this,t=n.AdminLTE.options.controlSidebarOptions,r=n(t.selector),a=n(t.toggleBtnSelector);a.on("click",function(a){a.preventDefault(),r.hasClass("control-sidebar-open")||n("body").hasClass("control-sidebar-open")?e.close(r,t.slide):e.open(r,t.slide)});var i=n(".control-sidebar-bg");e._fix(i),n("body").hasClass("fixed")?e._fixForFixed(r):n(".content-wrapper, .right-side").height()<r.height()&&e._fixForContent(r)},open:function(e,t){t?e.addClass("control-sidebar-open"):n("body").addClass("control-sidebar-open")},close:function(e,t){t?e.removeClass("control-sidebar-open"):n("body").removeClass("control-sidebar-open")},_fix:function(t){var r=this;if(n("body").hasClass("layout-boxed")){if(t.css("position","absolute"),t.height(n(".wrapper").height()),r.hasBindedResize)return;n(e).resize(function(){r._fix(t)}),r.hasBindedResize=!0}else t.css({position:"fixed",height:"auto"})},_fixForFixed:function(e){e.css({position:"fixed","max-height":"100%",overflow:"auto","padding-bottom":"50px"})},_fixForContent:function(e){n(".content-wrapper, .right-side").css("min-height",e.height())}},n.AdminLTE.boxWidget={selectors:n.AdminLTE.options.boxWidgetOptions.boxWidgetSelectors,icons:n.AdminLTE.options.boxWidgetOptions.boxWidgetIcons,animationSpeed:n.AdminLTE.options.animationSpeed,activate:function(e){var t=this;e||(e=document),n(e).on("click",t.selectors.collapse,function(e){e.preventDefault(),t.collapse(n(this))}),n(e).on("click",t.selectors.remove,function(e){e.preventDefault(),t.remove(n(this))})},collapse:function(e){var t=this,n=e.parents(".box").first(),r=n.find("> .box-body, > .box-footer, > form  >.box-body, > form > .box-footer");n.hasClass("collapsed-box")?(e.children(":first").removeClass(t.icons.open).addClass(t.icons.collapse),r.slideDown(t.animationSpeed,function(){n.removeClass("collapsed-box")})):(e.children(":first").removeClass(t.icons.collapse).addClass(t.icons.open),r.slideUp(t.animationSpeed,function(){n.addClass("collapsed-box")}))},remove:function(e){var t=e.parents(".box").first();t.slideUp(this.animationSpeed)}}}if(t.module("TimetableApp",["pascalprecht.translate","ngRoute"]),"undefined"==typeof jQuery)throw new Error("AdminLTE requires jQuery");n.AdminLTE={},n.AdminLTE.options={navbarMenuSlimscroll:!0,navbarMenuSlimscrollWidth:"3px",navbarMenuHeight:"200px",animationSpeed:500,sidebarToggleSelector:'[data-toggle="offcanvas"]',sidebarPushMenu:!0,sidebarSlimScroll:!0,sidebarExpandOnHover:!1,enableBoxRefresh:!0,enableBSToppltip:!0,BSTooltipSelector:'[data-toggle="tooltip"]',enableFastclick:!1,enableControlSidebar:!0,controlSidebarOptions:{toggleBtnSelector:'[data-toggle="control-sidebar"]',selector:".control-sidebar",slide:!0},enableBoxWidget:!0,boxWidgetOptions:{boxWidgetIcons:{collapse:"fa-minus",open:"fa-plus",remove:"fa-times"},boxWidgetSelectors:{remove:'[data-widget="remove"]',collapse:'[data-widget="collapse"]'}},directChat:{enable:!0,contactToggleSelector:'[data-widget="chat-pane-toggle"]'},colors:{lightBlue:"#3c8dbc",red:"#f56954",green:"#00a65a",aqua:"#00c0ef",yellow:"#f39c12",blue:"#0073b7",navy:"#001F3F",teal:"#39CCCC",olive:"#3D9970",lime:"#01FF70",orange:"#FF851B",fuchsia:"#F012BE",purple:"#8E24AA",maroon:"#D81B60",black:"#222222",gray:"#d2d6de"},screenSizes:{xs:480,sm:768,md:992,lg:1200}},r()}(window,angular,jQuery),function(e){"use strict";e.module("TimetableApp").controller("loginCtrl",["$log","$scope","authService",function(e,t,n){t.userInfo={username:"",password:""},t.userLogin=function(e){e&&n.login(t.userInfo)}}])}(angular),function(e,t){"use strict";e.module("TimetableApp").controller("timetableCtrl",["$log","$scope","$rootScope","$window","$translate","timetableManagerConfig","authService",function(n,r,a,i,o,s,l){var d=i.localStorage;a.userinfo=e.fromJson(d.authtoken),r.schoolId=a.userinfo.agencyName,r.schoolUUID=a.userinfo.agency,r.schoolInfoBean=a.userinfo.schoolInfoBean,r.config=s,r.viewTemplate=d.getItem("viewTemplate")||"content.html",r.modalTypes={type:"",types:{danger:"modal-danger",success:"modal-success",warning:"model-warning"},sureClick:function(){}},r.logout=function(){l.logout()},r.setTemplate=function(e){d.setItem("viewTemplate",e),r.viewTemplate=e,t.toString()},r.modal=function(e,n,a,i,o){var s=t("#"+e);return s.modal(n?"hide":"show"),r.modalTypes.type=i,r.modalTypes.sureClick=a?a:function(){},!o||s},r.changeLanguage=function(e){return e?(d.setItem("language",e),o.use(e)):void o.use(d.getItem("language")||s.defaultLang)};var c=t.AdminLTE.options;t("body").removeClass("hold-transition"),t.AdminLTE.layout.activate(),t.AdminLTE.tree(".sidebar"),c.sidebarPushMenu&&t.AdminLTE.pushMenu.activate(c.sidebarToggleSelector),t("#myModal").modal("hide")}])}(angular,jQuery),function(e){"use strict";e.module("TimetableApp").controller("timetableEditCtrl",["$log","$scope","apiMiddleware","$filter","timetableService",function(t,n,r,a,i){n.noonNums={forenoonNum:"",afternoonNum:""},n.timeTemp=[],n.temps={fore:[],after:[]},n.currentSelects={stageId:0,gradeId:0,classId:0,timePicker:{startDate:"",endDate:""},baseId:0},n.callout=!1;var o=[{id:0,title:"请选择"}];n.stages=[{id:0,title:"请选择"}],n.grades=[{id:0,title:"请选择"}],n.subjects=[{id:0,title:"请选择"}],n.classes=[{id:0,title:"请选择"}],n.apiMiddleware=new r,n.timetable={subjects:[],users:[]},n.submitForm=function(e){if(e){var r=[],a=[],i={};n.timetable.subjects.forEach(function(e){r.push(e)}),n.timetable.users.forEach(function(e){a.push(e)}),i={id:n.currentSelects.baseId,stagesId:n.currentSelects.stageId,gradeId:n.currentSelects.gradeId,classId:n.currentSelects.classId,startDate:n.currentSelects.timePicker.startDate,endDate:n.currentSelects.timePicker.endDate,schoolId:n.schoolId},n.apiMiddleware.saveTimeTable(i,r,a,n.schoolInfoBean).then(function(e){200==e.status&&(n.callout=!0),t.info(e)})}},n.searchStage=function(e){e=e||0;var t=3;l(),n.apiMiddleware.getBasedata(e,t).then(function(e){200==e.status&&(n.stages=o.concat(e.data))})},n.searchSubjects=function(e){var t=3;d(),n.apiMiddleware.getBasedata(e,t).then(function(e){200==e.status&&(n.subjects=o.concat(e.data))})};var s=function(){n.apiMiddleware.getClasses(n.schoolUUID).then(function(t){if(200==t.status){var r=[];e.forEach(t.data,function(e){r.push({id:e.id,title:e.className})}),n.classes=o.concat(r)}})},l=function(){c(),d()},d=function(){for(var e=0;e<parseInt(n.noonNums.forenoonNum)+parseInt(n.noonNums.afternoonNum);e++)n.timetable.subjects[e].mon=0,n.timetable.subjects[e].tue=0,n.timetable.subjects[e].wed=0,n.timetable.subjects[e].thur=0,n.timetable.subjects[e].fri=0;n.subjects=o},c=function(){n.currentSelects.gradeId=0,n.grades=o};n.searchGrades=function(e){e=e||0;var t=6;c(),n.apiMiddleware.getBasedata(e,t).then(function(e){200==e.status&&(n.grades=o.concat(e.data))})};var u=function(e,t){var n=new Date("2017-01-01 "+e),r=new Date("2017-01-01 "+t);return!(n.getTime()>r.getTime())},m=function(e,t){var r={tempId:0,mon:0,tue:0,wed:0,thur:0,fri:0};e=e||r,t&&(e.tempId=t),n.timetable.subjects.push(e),n.timetable.users.push({mon:"",tue:"",wed:"",thur:"",fri:""})},p=function(){n.apiMiddleware.getTimetableTemp(n.schoolId).then(function(t){var r=0,a=0;200==t.status&&e.forEach(t.data,function(e,t,i){e.startTime=i[t].startTime.substr(0,5),e.endTime=i[t].endTime.substr(0,5),u(e.startTime,"12:00")?(r++,n.temps.fore.push(e)):(a++,n.temps.after.push(e)),m(null,e.id)}),n.noonNums={forenoonNum:r,afternoonNum:a},n.timeTemp=n.temps.fore.concat(n.temps.after);var o=null==i.get().timetableId?0:i.get().timetableId;null!=o&&0!=o&&f(o)})},f=function(t){n.apiMiddleware.getTimetable(t).then(function(t){if(200==t.status){var r=t.data;if(null!=r){null!=r.stagesId&&0!=r.stagesId&&(n.searchGrades(r.stagesId),n.searchSubjects(r.stagesId)),e.forEach(r.infoList,function(e,t){n.timetable.subjects[t].id=e.id,n.timetable.subjects[t].tempId=e.tempId,n.timetable.subjects[t].mon=e.mon,n.timetable.subjects[t].tue=e.tue,n.timetable.subjects[t].wed=e.wed,n.timetable.subjects[t].thur=e.thur,n.timetable.subjects[t].fri=e.fri;var r={infoId:e.infoUser.infoId,mon:e.infoUser.mon,tue:e.infoUser.tue,wed:e.infoUser.wed,thur:e.infoUser.thur,fri:e.infoUser.fri};n.timetable.users[t]=r}),n.currentSelects.stageId=null==r.stagesId?0:r.stagesId,n.currentSelects.gradeId=null==r.gradeId?0:r.gradeId,n.currentSelects.classId=null==r.classId?0:r.classId,n.currentSelects.baseId=null==r.id?0:r.id;var i=a("date")(r.startDate,"yyyy-MM-dd"),o=a("date")(r.endDate,"yyyy-MM-dd");null!=r.startDate&&null!=r.endDate&&(n.currentSelects.timePicker.startDate=i,n.currentSelects.timePicker.endDate=o)}}})},b=function(){var e=a("date")(new Date,"yyyy-MM-dd");n.currentSelects.timePicker.startDate=e,n.currentSelects.timePicker.endDate=e,s(),n.searchStage(),p()};b()}])}(angular),function(e,t){"use strict";e.module("TimetableApp").controller("timetableListCtrl",["$log","$scope","apiMiddleware","timetableService",function(n,r,a,i){r.apiMiddleware=new a,r.option={curr:0,all:0,count:10,click:function(e){n.info(e),r.loadTimetableList(e-1)}};var o=[{id:0,title:"请选择"}];r.stages=[{id:0,title:"请选择"}],r.grades=[{id:0,title:"请选择"}],r.currentSelects={gradeId:0,stageId:0},r.dataList=[],r.listIndex=0,r.tabsActive=1,r.searchStage=function(e){e=e||0;var t=3;s(),r.apiMiddleware.getBasedata(e,t).then(function(e){200==e.status&&(r.stages=o.concat(e.data))})};var s=function(){r.currentSelects.gradeId=0,r.grades=o};r.searchGrades=function(e){e=e||0;var t=6;s(),r.apiMiddleware.getBasedata(e,t).then(function(e){200==e.status&&(r.grades=o.concat(e.data))})};var l=function(e,t,n){var r=[];if(e=parseInt(e),t=parseInt(t),n=parseInt(n),0==t)return r;var a=e-parseInt(n/2),i=e+parseInt(n/2)+n%2-1;a<=0&&(a=1,i=a+n-1,i>t&&(i=t)),i>t&&(i=t,a=i-n+1,a<=0&&(a=1));for(var o=a;o<=i;o++)r.push(o);return r.push("»"),r.unshift("«"),r};r.loadTimetableList=function(e,t){e=e||0,t=t||10,r.apiMiddleware.getTimetableList(e,t,r.tabsActive,r.schoolId,r.currentSelects.stageId,r.currentSelects.gradeId).then(function(e){if(200==e.status){var n=e.data;r.option.curr=n.pageIndex+1,r.option.all=n.totalPages,r.page=l(r.option.curr,r.option.all,r.option.count),r.dataList=n.list,r.listIndex=(r.option.curr-1)*t}})},r.viewShow={},r.showView=function(n){r.viewShow={},r.viewShow=r.dataList[n],t("#showView").modal("show"),r.apiMiddleware.getBasedata(r.viewShow.stagesId,3).then(function(t){if(200==t.status){var n=t.data;r.apiMiddleware.getTimetable(r.viewShow.id).then(function(t){if(200==t.status){var a=t.data;if(null!=a.infoList){var i=[];e.forEach(a.infoList,function(e){var t="",r=t.concat(d(n,e.mon).title,"(",null==e.infoUser.mon?"":e.infoUser.mon,")").replace("()",""),a=t.concat(d(n,e.tue).title,"(",null==e.infoUser.tue?"":e.infoUser.tue,")").replace("()",""),o=t.concat(d(n,e.wed).title,"(",null==e.infoUser.wed?"":e.infoUser.wed,")").replace("()",""),s=t.concat(d(n,e.thur).title,"(",null==e.infoUser.thur?"":e.infoUser.thur,")").replace("()",""),l=t.concat(d(n,e.fri).title,"(",null==e.infoUser.fri?"":e.infoUser.fri,")").replace("()",""),c={mon:r,tue:a,wed:o,thur:s,fri:l};i.push(c)}),r.viewShow.datas=i}}})}})};var d=function(t,n){if(null==n||0==n)return{title:""};var r;return e.forEach(t,function(e){if(e.id==n)return void(r=e)}),r};r.editTimetable=function(e){null==e?i.set({}):i.set({timetableId:e}),r.setTemplate("timetable_edit.html")},r.delTimetable=function(e){null!=e&&0!=e?r.modal("myModal",!1,function(){r.apiMiddleware.delTimetable(e,r.schoolId).then(function(e){200==e.status&&r.loadTimetableList(),r.modal("myModal",!0)})},r.modalTypes.types.danger):r.modal("myModal",!0)},r.noonNums={forenoonNum:"",afternoonNum:""},r.timeTemp=[];var c=function(e,t){var n=new Date("2017-01-01 "+e),r=new Date("2017-01-01 "+t);return!(n.getTime()>r.getTime())};r.temps={fore:[],after:[],version:0};var u=function(){r.apiMiddleware.getTimetableTemp(r.schoolId).then(function(t){var n=0,a=0;e.forEach(t.data,function(e,t,i){e.startTime=i[t].startTime.substr(0,5),e.endTime=i[t].endTime.substr(0,5),c(e.startTime,"12:00")?(n++,r.temps.fore.push(e)):(a++,r.temps.after.push(e)),r.temps.version=e.version}),r.noonNums={forenoonNum:n,afternoonNum:a},r.timeTemp=r.temps.fore.concat(r.temps.after)})},m=function(){t("#showView").modal("hide"),r.loadTimetableList(),r.searchStage(),u()};m()}])}(angular,jQuery),function(e,t){"use strict";e.module("TimetableApp").controller("timetableTempCtrl",["$scope","apiMiddleware",function(n,r){n.noonNums={forenoonNum:"",afternoonNum:""},n.timeTemp=[],n.temps={fore:[],after:[],version:0},n.apiMiddleware=new r,n.callout=!1,n.submitForm=function(e){if(e){var t=[],r=n.temps.version+1;n.timeTemp.forEach(function(e,a,i){t.push({startTime:i[a].startTime+":00",endTime:i[a].endTime+":00",version:r,schoolId:n.schoolId})}),n.apiMiddleware.saveTemps(t,n.schoolId).then(function(e){200==e.status&&(n.callout=!0)})}},n.$watch("noonNums.forenoonNum",function(e,t){if(""!==t){n.timeTemp=[];for(var r=0;r<parseInt(n.noonNums.forenoonNum)+parseInt(n.noonNums.afternoonNum);r++)n.timeTemp.push({id:"",startTime:"",endTime:""})}}),n.$watch("noonNums.afternoonNum",function(e,t){if(""!==t){n.timeTemp=[];for(var r=0;r<parseInt(n.noonNums.forenoonNum)+parseInt(n.noonNums.afternoonNum);r++)n.timeTemp.push({id:"",startTime:"",endTime:""})}}),n.renderFinish=function(){n.timeTemp.forEach(function(e){t("#start"+e.id).timepicker({minuteStep:5,showInputs:!1,disableFocus:!0,showMeridian:!1}),t("#end"+e.id).timepicker({minuteStep:5,showInputs:!1,disableFocus:!0,showMeridian:!1})})};var a=function(e,t){var n=new Date("2017-01-01 "+e),r=new Date("2017-01-01 "+t);return!(n.getTime()>r.getTime())},i=function(){n.apiMiddleware.getTimetableTemp(n.schoolId).then(function(t){var r=0,i=0;e.forEach(t.data,function(e,t,o){e.startTime=o[t].startTime.substr(0,5),e.endTime=o[t].endTime.substr(0,5),a(e.startTime,"12:00")?(r++,n.temps.fore.push(e)):(i++,n.temps.after.push(e)),n.temps.version=e.version}),n.noonNums={forenoonNum:r,afternoonNum:i},n.timeTemp=n.temps.fore.concat(n.temps.after)})};n.parseInt=parseInt,i()}])}(angular,jQuery),function(e,t){"use strict";var n=e.module("TimetableApp");n.directive("myPagination",["$log",function(e){return{restrict:"EA",replace:!0,template:'<ul class="pagination"><li class="paginate_button {{option.curr==p?\'active\':\'\'}}" ng-click="pageClick(p)" ng-repeat="p in page"><a href="javascript:;" aria-controls="example2" data-dt-idx="{{p}}" tabindex="0">{{p}}</a></li></ul>',link:function(t){function n(e,t,n){var r=[];if(e=parseInt(e),t=parseInt(t),n=parseInt(n),0==t)return r;var a=e-parseInt(n/2),i=e+parseInt(n/2)+n%2-1;a<=0&&(a=1,i=a+n-1,i>t&&(i=t)),i>t&&(i=t,a=i-n+1,a<=0&&(a=1));for(var o=a;o<=i;o++)r.push(o);return r.push("»"),r.unshift("«"),r}e.info(t),(!t.option.curr||isNaN(t.option.curr)||t.option.curr<1)&&(t.option.curr=1),(!t.option.all||isNaN(t.option.all)||t.option.all<0)&&(t.option.all=0),t.option.curr>t.option.all&&(t.option.curr=t.option.all),(!t.option.count||isNaN(t.option.count)||t.option.count<1)&&(t.option.count=10),t.page=n(t.option.curr,t.option.all,t.option.count),t.pageClick=function(e){"«"==e?e=parseInt(t.option.curr)-1:"»"==e&&(e=parseInt(t.option.curr)+1),e<1?e=1:e>t.option.all&&(e=t.option.all),e!=t.option.curr&&t.option.click&&"function"==typeof t.option.click&&(t.option.click(e),t.option.curr=e,t.page=n(t.option.curr,t.option.all,t.option.count))}}}}]),n.directive("timepicker",[function(){return{restrict:"EA",require:"ngModel",link:function(e,n,r,a){t(n).timepicker({minuteStep:5,showInputs:!1,disableFocus:!0,showMeridian:!1}).on("hide.timepicker",function(t){e.$apply(function(){"00:00"!=t.time.value&&a.$setViewValue(t.time.value)})})}}}]),n.directive("daterangepicker",["$window","$log",function(e,n){var r=e.moment;return{restrict:"EA",require:"ngModel",link:function(e,a,i,o){var s,l,d,c,u=t(a),m=e.currentSelects.timePicker.startDate,p=e.currentSelects.timePicker.endDate,f={dateLimit:{days:210},locale:{format:"YYYY-MM-DD"},separator:" - "};""!=m&&(f.startDate=m),""!=p&&(f.endDate=p),c=function(){return s.setStartDate(),s.setEndDate(),u.val("")},d=function(e){var t=function(e){return r.isMoment(e)?e.format(f.format):r(e).format(f.locale.format)};return f.singleDatePicker?t(e.startDate):[t(e.startDate),t(e.endDate)].join(f.separator)},o.$render=function(){return o.$modelValue?void 0===o.$modelValue.startDate?c():u.val(d(o.$modelValue)):u.val("")},(l=function(){u.daterangepicker(f,function(e,t){n.info("start-end"),n.info(e),n.info(t),n.info(o.$modelValue),o.$setViewValue({startDate:e.format(f.locale.format),endDate:t.format(f.locale.format)}),o.$render()}).on("hide.daterangepicker",function(){"string"==typeof o.$modelValue&&o.$render()}),s=u.data("daterangepicker")})()}}}])}(angular,jQuery),function(e){"use strict";function t(t,n,r,a,i,o,s){function l(t,n){return r.error("XHR Failed for "+t+".\n",e.toJson(n,!0))}function d(t){function a(t){r.info(t),200===t.status&&t.data.authorities.includes("timetable")?(r.log(t.headers("authtoken")),r.log(t.headers),r.log(t.headers()),r.log(t.headers().authtoken),f.authtoken=e.toJson(t.data),u(!0),s.path("/home")):(f.authtoken="",u(!1))}var i=o.loginUrl;return n({method:"POST",url:i,params:{registerName:t.username,registerpwd:t.password}}).then(a)}function c(){f.clear(),s.path("/login")}function u(e){f.isAuth=e}function m(){var e={isAuth:f.isAuth,authtoken:f.authtoken};return e}function p(){var e=a.defer();return n.get(b).then(function(t){"200"===t.status?t.data.authorities.includes("timetable")?e.resolve(!0):e.resolve(!1):(l("checkAuthentication()",t),e.reject(!1))}),e.promise}var f=i.localStorage,b=o.baseUrl+"user/permission",h={login:d,logout:c,getAuthenticationParams:m,checkAuthentication:p};return h}e.module("TimetableApp").factory("authService",["$rootScope","$http","$log","$q","$window","timetableManagerConfig","$location",t])}(angular),function(e){"use strict";function t(e,t,n,r){e.info("--------authInterceptor"+r)}e.module("TimetableApp").factory("authInterceptorService",["$log","$q","$injector","$location",t])}(angular),function(e){"use strict";var t=e.module("TimetableApp");t.factory("timetableService",function(){var e={},t={},n=function(e){t=e},r=function(){return t};return e.set=n,e.get=r,e})}(angular),function(e){"use strict";e.module("TimetableApp").provider("timetableManagerConfig",function(){var t={appName:"timetable v0.0.1",defaultLang:"en",tplPath:"src/templates",tempListUrl:"timetable/tempList",timetableListUrl:"timetable/timetables",delTimetableUrl:"timetable/delete",saveTempsUrl:"timetable/saveTemp",saveTimeTableUrl:"timetable/save",timeTableUrl:"timetable/list",basedataUrl:"basedata",classListUrl:"schools/classes",loginUrl:"http://localhost:8080/CloudPlatform/userCrossLogin.do"};return{$get:function(){return t},set:function(n){e.extend(t,n)}}})}(angular),function(e){"use strict";e.module("TimetableApp").service("apiHandler",["$log","$http","$q","$window","$translate",function(t,n,r,a,i){var o=function(){this.inprocess=!1,this.asyncSuccess=!1,this.error=""};return o.prototype.deferredHandler=function(e,t,n,r){return e&&"object"==typeof e||(this.error="Error %s - Bridge response error, please check the API docs or this ajax response.".replace("%s",n)),404==n&&(this.error="Error 404 - Backend bridge is not working, please check the ajax response."),e.result&&e.result.error&&(this.error=e.result.error),!this.error&&e.error&&(this.error=e.error.message),!this.error&&r&&(this.error=r),this.error?t.reject(e):t.resolve(e)},o.prototype.delTimetable=function(e,t,a){var o=this,s=r.defer();o.inprocess=!0,o.error="";var l={id:t,schoolId:a};return n.post(e,l).then(function(e){o.deferredHandler(e,s)},function(e,t){o.deferredHandler(e,s,t,i.instant("error_saveTemps"))}),s.promise},o.prototype.saveTemps=function(t,a,o){var s=this,l=r.defer();return s.inprocess=!0,s.error="",n.post(t,{temps:e.toJson(a),schoolId:o}).then(function(e){s.deferredHandler(e,l)},function(e,t){s.deferredHandler(e,l,t,i.instant("error_saveTemps"))}),l.promise},o.prototype.saveTimeTable=function(e,a,o,s,l){var d=this,c=r.defer();d.inprocess=!0,d.error="";var u={baseInfo:a,info:o,userInfo:s,schoolInfoBean:l,schoolId:l.schoolId};return n({method:"post",url:e,data:u}).then(function(e){t.info(e),d.deferredHandler(e,c)},function(e,t){d.deferredHandler(e,c,t,i.instant("error_saveTemps"))}),c.promise},o.prototype.getTimetableList=function(e,t,a,o,s,l,d){var c=this,u=r.defer();c.inprocess=!0,c.error="";var m={pageIndex:t,pageSize:a,type:o,schoolId:s,stagesId:l,gradeId:d};return n.get(e,{params:m}).then(function(e){c.deferredHandler(e,u)},function(e,t){c.deferredHandler(e,u,t,i.instant("error_getTimetableTempList"))}),u.promise},o.prototype.getTimetableTempList=function(e,t){var a=this,o=r.defer();return a.inprocess=!0,a.error="",n.get(e+"?schoolId="+t).then(function(e){a.deferredHandler(e,o)},function(e,t){a.deferredHandler(e,o,t,i.instant("error_getTimetableTempList"))}),o.promise},o.prototype.getTimetable=function(e,t){var a=this,o=r.defer();return a.inprocess=!0,a.error="",n.get(e+"?id="+t).then(function(e){a.deferredHandler(e,o)},function(e,t){a.deferredHandler(e,o,t,i.instant("error_getTimetableTempList"))}),o.promise},o.prototype.getBasedata=function(e,t){var a=this,o=r.defer();return a.inprocess=!0,a.error="",n.get(e+"?type="+t).then(function(e){a.deferredHandler(e,o)},function(e,t){a.deferredHandler(e,o,t,i.instant("error_getBasedata"))}),o.promise},o.prototype.getClassList=function(e,t){var a=this,o=r.defer();return a.inprocess=!0,a.error="",n.get(e+"?schoolId="+t).then(function(e){a.deferredHandler(e,o)},function(e,t){a.deferredHandler(e,o,t,i.instant("error_getClassList"))}),o.promise},o}])}(angular),function(e){"use strict";e.module("TimetableApp").service("apiMiddleware",["$window","timetableManagerConfig","apiHandler",function(e,t,n){var r=function(){this.apiHandler=new n};return r.prototype.delTimetable=function(e,n){return this.apiHandler.delTimetable(t.delTimetableUrl,e,n)},r.prototype.getTimetableList=function(e,n,r,a,i,o){return this.apiHandler.getTimetableList(t.timetableListUrl,e,n,r,a,i,o)},r.prototype.getTimetableTemp=function(e){return this.apiHandler.getTimetableTempList(t.tempListUrl,e)},r.prototype.saveTemps=function(e,n){return this.apiHandler.saveTemps(t.saveTempsUrl,e,n)},r.prototype.saveTimeTable=function(e,n,r,a){return this.apiHandler.saveTimeTable(t.saveTimeTableUrl,e,n,r,a)},r.prototype.getTimetable=function(e){return this.apiHandler.getTimetable(t.timeTableUrl,e)},r.prototype.getBasedata=function(e,n){return this.apiHandler.getBasedata(t.basedataUrl+"/"+e,n)},r.prototype.getClasses=function(e){return this.apiHandler.getClassList(t.classListUrl,e)},r}])}(angular),angular.module("TimetableApp").run(["$templateCache",function(e){e.put("app/templates/content.html",'\r\n<!-- Content Header (Page header) -->\r\n<section class="content-header">\r\n    <h1>\r\n        Dashboard\r\n        <small>Control panel</small>\r\n    </h1>\r\n    <ol class="breadcrumb">\r\n        <li><a href="javascript:;"><i class="fa fa-dashboard"></i> Home</a></li>\r\n        <li class="active">Dashboard</li>\r\n    </ol>\r\n</section>\r\n\r\n<!-- Main content -->\r\n<section class="content">\r\n    <!-- Small boxes (Stat box) -->\r\n    <div class="row">\r\n        <div class="col-lg-3 col-xs-6">\r\n            <!-- small box -->\r\n            <div class="small-box bg-aqua">\r\n                <div class="inner">\r\n                    <h3>150</h3>\r\n\r\n                    <p>New Orders</p>\r\n                </div>\r\n                <div class="icon">\r\n                    <i class="ion ion-bag"></i>\r\n                </div>\r\n                <a href="javascript:;" class="small-box-footer">More info <i class="fa fa-arrow-circle-right"></i></a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /.row -->\r\n    <!-- Main row -->\r\n    <div class="row">\r\n        123\r\n    </div>\r\n    <!-- /.row (main row) -->\r\n\r\n</section>\r\n<!-- /.content -->'),e.put("app/templates/footer.html",'<div class="pull-right hidden-xs">\r\n    <b>Version</b> 1.0.0\r\n</div>\r\n<strong>Copyright &copy; 2014-2016 <a href="javascript:void(0);"></a>.</strong>'),e.put("app/templates/header.html",'\r\n<!-- Logo -->\r\n<a class="logo">\r\n    <!-- mini logo for sidebar mini 50x50 pixels -->\r\n    <span class="logo-mini"><b>课表</b>管理</span>\r\n    <!-- logo for regular state and mobile devices -->\r\n    <span class="logo-lg"><b>课表管理</b>系统</span>\r\n</a>\r\n<!-- Header Navbar: style can be found in header.less -->\r\n<nav class="navbar navbar-static-top">\r\n    <!-- Sidebar toggle button-->\r\n    <a href="javascript:;" class="sidebar-toggle" data-toggle="offcanvas" role="button">\r\n        <span class="sr-only">Toggle navigation</span>\r\n    </a>\r\n\r\n    <div class="navbar-custom-menu">\r\n        <ul class="nav navbar-nav">\r\n            <li class="dropdown user user-menu">\r\n                <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown">\r\n                    <img src="dist/img/user2-160x160.jpg" class="user-image" alt="User Image">\r\n                    <span class="hidden-xs">{{userinfo.realname}}</span>\r\n                </a>\r\n                <ul class="dropdown-menu">\r\n                    <!-- User image -->\r\n                    <li class="user-header">\r\n                        <img src="dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">\r\n\r\n                        <p>\r\n                            {{userinfo.realname}} - 课表管理系统\r\n                            <small>欢迎您使用本系统</small>\r\n                        </p>\r\n                    </li>\r\n\r\n                    <!-- Menu Footer-->\r\n                    <li class="user-footer">\r\n\r\n                        <div class="pull-right">\r\n                            <a ng-click="logout()" class="btn btn-default btn-flat">退出</a>\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</nav>\r\n\r\n'),e.put("app/templates/login.html",'<div class="login-box" ng-controller="loginCtrl">\r\n    <div class="login-logo">\r\n        <a href="#/login"><b>课表管理</b>系统</a>\r\n    </div>\r\n    <!-- /.login-logo -->\r\n    <div class="login-box-body">\r\n        <p class="login-box-msg">欢迎登陆课表管理系统</p>\r\n\r\n        <form name="loginForm">\r\n            <div class="form-group has-feedback">\r\n                <input type="text" class="form-control" placeholder="账号" ng-model="userInfo.username" required>\r\n                <span class="glyphicon glyphicon-envelope form-control-feedback"></span>\r\n            </div>\r\n            <div class="form-group has-feedback">\r\n                <input type="password" class="form-control" placeholder="密码" ng-model="userInfo.password" required>\r\n                <span class="glyphicon glyphicon-lock form-control-feedback"></span>\r\n            </div>\r\n            <div class="row">\r\n                <div class="col-xs-8">\r\n\r\n                </div>\r\n                <!-- /.col -->\r\n                <div class="col-xs-4">\r\n                    <button type="submit" class="btn btn-primary btn-block btn-flat" ng-click="userLogin(loginForm.$valid)" ng-disabled="loginForm.$invalid">登录</button>\r\n                </div>\r\n                <!-- /.col -->\r\n            </div>\r\n        </form>\r\n    </div>\r\n    <!-- /.login-box-body -->\r\n</div>'),e.put("app/templates/main.html",'<div class="wrapper" ng-controller="timetableCtrl">\r\n    <header class="main-header" ng-include="config.tplPath+\'/header.html\'"></header>\r\n\r\n    <aside class="main-sidebar" ng-include="config.tplPath+\'/sidebar.html\'"></aside>\r\n\r\n    <div class="content-wrapper">\r\n        <div  ng-include="config.tplPath+\'/\'+viewTemplate"></div>\r\n    </div>\r\n\r\n    <footer class="main-footer" ng-include="config.tplPath+\'/footer.html\'"></footer>\r\n    <div ng-include="config.tplPath+\'/modal.html\'"></div>\r\n</div>\r\n'),e.put("app/templates/modal.html",'<div class="modal fade" id="myModal" ng-class="modalTypes.type" tabindex="-1" role="dialog"\r\n     aria-labelledby="myModalLabel">\r\n    <div class="modal-dialog" role="document">\r\n        <div class="modal-content">\r\n            <!--<div class="modal-header">\r\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\r\n                <h4 class="modal-title" id="myModalLabel">Modal title</h4>\r\n            </div>-->\r\n            <div class="modal-content">\r\n                <div class="modal-body">\r\n                    <p>确认执行本操作?&hellip;</p>\r\n                </div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="btn btn-outline" data-dismiss="modal">关闭</button>\r\n                <button type="button" class="btn btn-outline" ng-click="modalTypes.sureClick()">确认</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'),
e.put("app/templates/sidebar.html",'\r\n<!-- sidebar: style can be found in sidebar.less -->\r\n<section class="sidebar">\r\n    <!-- Sidebar user panel -->\r\n    <div class="user-panel">\r\n        <div class="pull-left image">\r\n            <img src="dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">\r\n        </div>\r\n        <div class="pull-left info">\r\n            <p>{{userinfo.realname}}</p>\r\n            <a href="#/home"><i class="fa fa-circle text-success"></i> Online</a>\r\n        </div>\r\n    </div>\r\n\r\n    <!-- sidebar menu: : style can be found in sidebar.less -->\r\n    <ul class="sidebar-menu">\r\n        <li class="header">导航菜单</li>\r\n        <li class="active treeview">\r\n            <a href="#/home">\r\n                <i class="fa fa-dashboard"></i> <span>课表管理</span>\r\n                <span class="pull-right-container">\r\n                  <i class="fa fa-angle-left pull-right"></i>\r\n                </span>\r\n            </a>\r\n            <ul class="treeview-menu">\r\n                <li><a href="#/home" ng-click="$parent.setTemplate(\'timetable_temp.html\')"><i class="fa fa-circle-o"></i>课表模板</a></li>\r\n                <li><a href="#/home" ng-click="$parent.setTemplate(\'timetable_list.html\')"><i class="fa fa-circle-o"></i>课表列表</a></li>\r\n            </ul>\r\n        </li>\r\n    </ul>\r\n</section>\r\n<!-- /.sidebar -->\r\n'),e.put("app/templates/timetable_edit.html",'<link rel="stylesheet" href="dist/libs/timepicker/daterangepicker.css">\r\n<!-- Content Header (Page header) -->\r\n<section class="content-header">\r\n    <h1>\r\n        编辑课表\r\n        <small></small>\r\n    </h1>\r\n    <ol class="breadcrumb">\r\n        <li><a href="javascript:;"><i class="fa fa-dashboard"></i>课表管理</a></li>\r\n        <li>课表列表</li>\r\n        <li class="active">编辑课表</li>\r\n    </ol>\r\n</section>\r\n\r\n<!-- Main content -->\r\n<section class="content" ng-controller="timetableEditCtrl">\r\n<form name="timetableForm">\r\n    <div class="box box-default  color-palette-box">\r\n        <div class="box-header with-border">\r\n            <h3 class="box-title"><i class="fa fa-tag"></i> 基础信息</h3>\r\n        </div>\r\n        <div class="box-body">\r\n            <div class="row">\r\n                <div class="col-sm-4 col-md-2">\r\n                    <div class="form-group">\r\n                        <label>学段</label>\r\n                        <select required class="form-control" ng-model="currentSelects.stageId"  ng-change="searchGrades(currentSelects.stageId);searchSubjects(currentSelects.stageId)" ng-options="s.id as s.title for s in stages">\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <!-- /.col -->\r\n                <div class="col-sm-4 col-md-2">\r\n                    <div class="form-group">\r\n                        <label>年级</label>\r\n                        <select  class="form-control" ng-model="currentSelects.gradeId" ng-options="g.id as g.title for g in grades">\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <!-- /.col -->\r\n                <div class="col-sm-4 col-md-3">\r\n                    <div class="form-group">\r\n                        <label>班级</label>\r\n                        <select  class="form-control" ng-model="currentSelects.classId" ng-options="c.id as c.title for c in classes">\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <!-- /.col -->\r\n                <div class="col-sm-4 col-md-5">\r\n                    <div class="form-group">\r\n                        <label>学期</label>\r\n                        <div class="input-group">\r\n                            <div class="input-group-addon">\r\n                                <i class="fa fa-calendar"></i>\r\n                            </div>\r\n                            <input required type="text" class="form-control pull-right" ng-model="currentSelects.timePicker" daterangepicker>\r\n                        </div>\r\n                        <!-- /.input group -->\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- /.box-body -->\r\n    </div>\r\n\r\n    <div class="box box-default color-palette-box">\r\n        <div class="box-header with-border">\r\n            <h3 class="box-title"><i class="fa fa-tag"></i> 详细信息</h3>\r\n        </div>\r\n        <div class="box-body">\r\n            <table class="table table-bordered">\r\n                <tr>\r\n                    <th>#</th>\r\n                    <th>节数</th>\r\n                    <th>星期一</th>\r\n                    <th>星期二</th>\r\n                    <th>星期三</th>\r\n                    <th>星期四</th>\r\n                    <th>星期五</th>\r\n                </tr>\r\n                <tr ng-repeat="item in timeTemp">\r\n                    <td rowspan="{{noonNums.forenoonNum}}" ng-if="noonNums.forenoonNum !=0  && $index == 0">\r\n                        上午\r\n                    </td>\r\n                    <td rowspan="{{noonNums.afternoonNum}}" ng-if="$index == noonNums.forenoonNum">下午</td>\r\n                    <td>\r\n                        第{{$index+1}}节<br>\r\n                        {{item.startTime}}~{{item.endTime}}\r\n                    </td>\r\n                    <td>\r\n                        <select class="form-control" ng-model="timetable.subjects[$index].mon" ng-options="s.id as s.title for s in subjects">\r\n                        </select>\r\n                        <input type="text" ng-model="timetable.users[$index].mon" value="">\r\n                    </td>\r\n                    <td>\r\n                        <select class="form-control" ng-model="timetable.subjects[$index].tue" ng-options="s.id as s.title for s in subjects">\r\n                        </select>\r\n                        <input type="text" ng-model="timetable.users[$index].tue" value="">\r\n                    </td>\r\n                    <td>\r\n                        <select class="form-control" ng-model="timetable.subjects[$index].wed" ng-options="s.id as s.title for s in subjects">\r\n                        </select>\r\n                        <input type="text" ng-model="timetable.users[$index].wed" value="">\r\n                    </td>\r\n                    <td>\r\n                        <select class="form-control" ng-model="timetable.subjects[$index].thur" ng-options="s.id as s.title for s in subjects">\r\n                        </select>\r\n                        <input type="text" ng-model="timetable.users[$index].thur"  value="">\r\n                    </td>\r\n                    <td>\r\n                        <select class="form-control" ng-model="timetable.subjects[$index].fri" ng-options="s.id as s.title for s in subjects">\r\n                        </select>\r\n                        <input type="text" ng-model="timetable.users[$index].fri" value="">\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n        </div>\r\n        <!-- /.box-body -->\r\n        <div class="box-footer">\r\n            <button type="submit" ng-show="!callout" class="btn btn-primary" ng-click="submitForm(timetableForm.$valid)" ng-disabled="timetableForm.$invalid">保 存</button>\r\n            <div class="callout callout-success" ng-show="callout">\r\n                <p>课表保存成功!</p>\r\n            </div>\r\n        </div>\r\n        <!-- /.box-footer -->\r\n    </div>\r\n</form>\r\n</section>\r\n<!-- /.content -->\r\n'),e.put("app/templates/timetable_list.html",'<link rel="stylesheet" href="dist/libs/timepicker/daterangepicker.css">\r\n<!-- Content Header (Page header) -->\r\n<section class="content-header">\r\n    <h1>\r\n        课表列表\r\n        <small></small>\r\n    </h1>\r\n    <ol class="breadcrumb">\r\n        <li><a href="javascript:;"><i class="fa fa-dashboard"></i>课表管理</a></li>\r\n        <li>课表列表</li>\r\n    </ol>\r\n</section>\r\n\r\n<!-- Main content -->\r\n<section class="content" ng-controller="timetableListCtrl">\r\n    <div class="box box-default  color-palette-box">\r\n        <div class="box-body">\r\n            <div class="row">\r\n                <div class="col-sm-4 col-md-2">\r\n                    <div class="form-group">\r\n                        <label>学段</label>\r\n                        <select required class="form-control" ng-model="currentSelects.stageId"\r\n                                ng-change="searchGrades(currentSelects.stageId);"\r\n                                ng-options="s.id as s.title for s in stages">\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n                <!-- /.col -->\r\n                <div class="col-sm-4 col-md-2">\r\n                    <div class="form-group">\r\n                        <label>年级</label>\r\n                        <select class="form-control" ng-model="currentSelects.gradeId"\r\n                                ng-options="g.id as g.title for g in grades" ng-change="loadTimetableList();">\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="row">\r\n                <div class="col-xs-12">\r\n                    <div class="box">\r\n                        <div class="nav-tabs-custom">\r\n                            <ul class="nav nav-tabs">\r\n                                <li ng-class="tabsActive==1?\'active\':\'\'"><a ng-click="tabsActive=1;loadTimetableList()" data-toggle="tab">进行中</a></li>\r\n                                <li ng-class="tabsActive==3?\'active\':\'\'"><a ng-click="tabsActive=3;loadTimetableList()" data-toggle="tab">已结束</a></li>\r\n                                <li ng-class="tabsActive==2?\'active\':\'\'"><a ng-click="tabsActive=2;loadTimetableList()" data-toggle="tab">未开始</a></li>\r\n                                <li class="pull-right"><button class="btn" ng-click="editTimetable()">添加课表</button></li>\r\n                            </ul>\r\n                            <div class="tab-content">\r\n                                <table id="example2" class="table table-bordered table-hover">\r\n                                    <thead>\r\n                                    <tr>\r\n                                        <th>序号</th>\r\n                                        <th>课表标题</th>\r\n                                        <th>学段</th>\r\n                                        <th>年级</th>\r\n                                        <th>学期</th>\r\n                                        <th>操作</th>\r\n                                    </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                    <tr ng-repeat="item in dataList" ng-click="showView($index)">\r\n                                        <td>{{$index + 1 + listIndex}}</td>\r\n                                        <td>{{item.className}}课表</td>\r\n                                        <td>{{item.stageName}}</td>\r\n                                        <td>{{item.gradeName}}</td>\r\n                                        <td>{{item.startDate | date:\'yyyy-MM-dd\' }}~{{ item.endDate | date:\'yyyy-MM-dd\' }}</td>\r\n                                        <td>\r\n                                            <button class="btn" ng-click="editTimetable(item.id)">编辑</button>\r\n                                            <button class="btn" ng-click="delTimetable(item.id)">删除</button>\r\n                                        </td>\r\n                                    </tr>\r\n                                    </tfoot>\r\n                                </table>\r\n                                <div class="row">\r\n                                    <div class="col-sm-5">\r\n                                        <div class="dataTables_info" id="example2_info" role="status" aria-live="polite">\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="col-sm-7">\r\n                                        <div class="dataTables_paginate paging_simple_numbers" id="example2_paginate">\r\n                                            <my-pagination></my-pagination>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <!-- /.tab-content -->\r\n                        </div>\r\n                        <!-- nav-tabs-custom -->\r\n                    </div>\r\n                </div>\r\n                <!-- /.col -->\r\n            </div>\r\n            <!-- /.row -->\r\n\r\n        </div>\r\n        <!-- /.box-body -->\r\n    </div>\r\n\r\n    <div class="modal" id="showView">\r\n        <div class="modal-dialog modal-lg">\r\n            <div class="modal-content">\r\n                <div class="modal-header">\r\n                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">\r\n                        <span aria-hidden="true">&times;</span></button>\r\n                    <h4 class="modal-title">预览 : {{viewShow.className}}课表</h4>\r\n                </div>\r\n                <div class="modal-body">\r\n                    <div class="row">\r\n                        <div class="col-md-2">\r\n                            <div class="form-group">\r\n                                <label>学段 : {{viewShow.stageName}}</label>\r\n                            </div>\r\n                        </div>\r\n                        <!-- /.col -->\r\n                        <div class="col-md-2">\r\n                            <div class="form-group">\r\n                                <label>年级 : {{viewShow.gradeName}}</label>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <!-- /.col -->\r\n                        <div class="col-md-5">\r\n                            <div class="form-group">\r\n                                <label>学期 : {{viewShow.startDate | date:\'yyyy-MM-dd\' }}~{{ viewShow.endDate |\r\n                                    date:\'yyyy-MM-dd\' }}</label>\r\n                                <!-- /.input group -->\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="row">\r\n                        <table class="table table-bordered">\r\n                            <tr>\r\n                                <th>#</th>\r\n                                <th>节数</th>\r\n                                <th>星期一</th>\r\n                                <th>星期二</th>\r\n                                <th>星期三</th>\r\n                                <th>星期四</th>\r\n                                <th>星期五</th>\r\n                            </tr>\r\n                            <tr ng-repeat="item in timeTemp">\r\n                                <td rowspan="{{noonNums.forenoonNum}}" ng-if="noonNums.forenoonNum !=0  && $index == 0">\r\n                                    上午\r\n                                </td>\r\n                                <td rowspan="{{noonNums.afternoonNum}}" ng-if="$index == noonNums.forenoonNum">下午</td>\r\n                                <td>\r\n                                    第{{$index+1}}节<br>\r\n                                    {{item.startTime}}~{{item.endTime}}\r\n                                </td>\r\n                                <td>\r\n                                    {{viewShow.datas[$index].mon}}\r\n                                </td>\r\n                                <td>\r\n                                    {{viewShow.datas[$index].tue}}\r\n                                </td>\r\n                                <td>\r\n                                    {{viewShow.datas[$index].wed}}\r\n                                </td>\r\n                                <td>\r\n                                    {{viewShow.datas[$index].thur}}\r\n                                </td>\r\n                                <td>\r\n                                    {{viewShow.datas[$index].fri}}\r\n                                </td>\r\n                            </tr>\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <!-- /.modal-content -->\r\n        </div>\r\n        <!-- /.modal-dialog -->\r\n    </div>\r\n    <!-- /.modal -->\r\n</section>\r\n<!-- /.content -->\r\n'),e.put("app/templates/timetable_temp.html",'<link rel="stylesheet" href="dist/libs/timepicker/bootstrap-timepicker.min.css">\r\n<!-- Content Header (Page header) -->\r\n<section class="content-header">\r\n    <h1>\r\n        课表模板\r\n        <small></small>\r\n    </h1>\r\n    <ol class="breadcrumb">\r\n        <li><a href="javascript:;"><i class="fa fa-dashboard"></i>课表管理</a></li>\r\n        <li class="active">课表模板</li>\r\n    </ol>\r\n</section>\r\n\r\n<!-- Main content -->\r\n<section class="content" ng-controller="timetableTempCtrl">\r\n\r\n    <!-- Main row -->\r\n    <div class="row">\r\n        <div class="col-md-4">\r\n            <div class="box">\r\n                <div class="box-header with-border">\r\n                    <h3 class="box-title">基础设置</h3>\r\n                </div>\r\n                <div class="box-body">\r\n                    <div class="row">\r\n                        <div class="form-group col-xs-5">\r\n                            <label>上午</label>\r\n                            <input type="text" class="form-control" placeholder="节课" ng-model="noonNums.forenoonNum"\r\n                                   maxlength="1"> <!--ng-keyup="numberFormat(noonNums,\'forenoonNum\')"-->\r\n                        </div>\r\n                        <div class="form-group col-xs-5">\r\n                            <label>下午</label>\r\n                            <input type="text" class="form-control" placeholder="节课" ng-model="noonNums.afternoonNum"\r\n                                   maxlength="1" ><!--ng-keyup="numberFormat(noonNums,\'afternoonNum\')"-->\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <!-- /.box-body -->\r\n            </div>\r\n            <!-- /.box -->\r\n        </div>\r\n        <div class="col-md-8">\r\n            <div class="box box-primary">\r\n                <div class="box-header">\r\n                    <h3 class="box-title">时间设置</h3>\r\n                </div>\r\n                <!-- /.box-header -->\r\n\r\n                <form name="tempForm">\r\n                    <div class="box-body no-padding">\r\n                        <table class="table table-bordered">\r\n                            <tr>\r\n                                <th style="width: 10px">#</th>\r\n                                <th style="width: 50px">节数</th>\r\n                                <th>时间</th>\r\n                            </tr>\r\n                            <tr ng-repeat="item in timeTemp">\r\n                                <td rowspan="{{noonNums.forenoonNum}}" ng-if="noonNums.forenoonNum !=0  && $index == 0">\r\n                                    上午\r\n                                </td>\r\n                                <td rowspan="{{noonNums.afternoonNum}}" ng-if="$index == noonNums.forenoonNum">下午</td>\r\n                                <td>{{$index+1}}</td>\r\n                                <td>\r\n                                    <div class="bootstrap-timepicker col-md-3"><input type="text"\r\n                                                                                      class="form-control timepicker"\r\n                                                                                      timepicker ng-model="timeTemp[$index].startTime" required value="timeTemp[$index].startTime"></div>\r\n                                    <div class="bootstrap-timepicker  col-md-3"><input type="text"\r\n                                                                                       class="form-control timepicker"\r\n                                                                                       timepicker ng-model="timeTemp[$index].endTime" required value="timeTemp[$index].endTime"></div>\r\n                                </td>\r\n                            </tr>\r\n                        </table>\r\n                    </div>\r\n                    <!-- /.box-body -->\r\n                    <div class="box-footer">\r\n                        <button ng-show="!callout" type="submit" class="btn btn-primary" ng-click="submitForm(tempForm.$valid)" ng-disabled="tempForm.$invalid || (timeTemp.length == 0)">保 存</button>\r\n                        <div class="callout callout-success" ng-show="callout">\r\n                            <h4>保存成功!</h4>\r\n                            <p>模板保存成功，请勿再次修改!</p>\r\n                        </div>\r\n                    </div>\r\n                    <!-- /.box-footer -->\r\n\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /.row (main row) -->\r\n\r\n    <div class="row">\r\n        <div class="col-md-12">\r\n            <div class="callout callout-warning">\r\n                <h4>模板编辑注意事项</h4>\r\n                <ol>\r\n                    <li>编辑基础设置，设置上下午各有几节课</li>\r\n                    <li>编辑各个课程时间</li>\r\n                    <li>时间为24小时制,上下午以12:00为界。</li>\r\n                </ol>\r\n                <p>注:模板保存完成,更改模板会使已录入课表失效.</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</section>\r\n<!-- /.content -->\r\n')}]);